package sivl.platform.file.cmd;import java.io.IOException;import java.net.Socket;import java.util.ArrayList;import java.util.List;import sivl.platform.file.model.FileGroupInfoModel;import sivl.platform.file.model.FileResultModel;/** * 分组信息命令 * 目的： * @author lixuefeng * @date 2016年1月7日 * @version 1.0 */public class GroupInfoCmd extends AbstractCmd<List<FileGroupInfoModel>> {	public GroupInfoCmd() {		super();		this.requestCmd = TRACKER_PROTO_CMD_SERVER_LIST_GROUP;		this.responseCmd = TRACKER_PROTO_CMD_RESP;		this.responseSize = -1;	}		@Override	public FileResultModel<List<FileGroupInfoModel>> exec(Socket socket) throws IOException {		request(socket.getOutputStream());		Response response = response(socket.getInputStream());		if(response.isSuccess()){			byte[] data = response.getData();			int dataLength = data.length;			if(dataLength%FileGroupInfoModel.BYTE_SIZE!=0){				throw new IOException("recv body length: " + data.length + " is not correct");			}			List<FileGroupInfoModel> groupInfos = new ArrayList<FileGroupInfoModel>();			int offset = 0;			while(offset<dataLength){				FileGroupInfoModel groupInfo = new FileGroupInfoModel(data,offset);				groupInfos.add(groupInfo);				offset += FileGroupInfoModel.BYTE_SIZE;			}			return new FileResultModel<List<FileGroupInfoModel>>(response.getCode(),groupInfos);		}else{			return new FileResultModel<List<FileGroupInfoModel>>(response.getCode(),"Error");		}	}}