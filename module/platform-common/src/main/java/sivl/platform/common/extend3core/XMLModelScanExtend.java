package sivl.platform.common.extend3core;import java.util.ArrayList;import java.util.List;import java.util.Set;import javax.annotation.PostConstruct;import javax.xml.bind.annotation.XmlRootElement;import org.springframework.beans.factory.config.BeanDefinition;import org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider;import org.springframework.core.type.filter.AnnotationTypeFilter;import org.springframework.oxm.jaxb.Jaxb2Marshaller;/** * xml实体扫描扩展支持<br/> * 目的：通过包名扫描实体，减少xml手动添加实体操作 * @author lixuefeng * @createTime 2015年12月4日 * @version 1.0 */public class XMLModelScanExtend extends Jaxb2Marshaller{	//	protected final Logger logger = Logger.getLogger(XMLModelScanExtend.class);		private List<String> packages;		@PostConstruct	public void init() throws Exception{		setClassesToBeBound(xmlModelScan());  	}		private Class<?>[] xmlModelScan() throws Exception{		ClassPathScanningCandidateComponentProvider scanner =                  new ClassPathScanningCandidateComponentProvider(false);          scanner.addIncludeFilter(new AnnotationTypeFilter(XmlRootElement.class));        List<Class<?>> classes = new ArrayList<Class<?>>();        for (String basePackage : packages) {              Set<BeanDefinition> definitions = scanner.findCandidateComponents(basePackage);              for (BeanDefinition definition : definitions) {                  String className = definition.getBeanClassName();//                if(logger.isInfoEnabled()){//                	logger.info("Found class: {"+className+"}");  //                }                classes.add(Class.forName(className));              }          }        return classes.toArray(new Class[0]); 	}	public List<String> getPackages() {		return packages;	}	public void setPackages(List<String> packages) {		this.packages = packages;	} }